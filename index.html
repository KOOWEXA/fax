<!DOCTYPE html>
<html lang="es" id="html-root">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>KOOFAX</title>
  <meta name="description" content="Sistema de facturaci贸n electr贸nica moderna, segura y eficiente"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90' fill='%2327ae60'%3EЬ%3C/text%3E%3C/svg%3E"/>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">
          <i class="fas fa-receipt"></i>
        </div>
        <div class="brand-text">
          <h1>KOOWEXA</h1>
          <p class="tagline">Facturaci贸n Electr贸nica Premium</p>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn-icon" id="themeToggle" title="Cambiar tema">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </header>

    <div class="stepper-container">
      <ul class="stepper">
        <li id="step1Label" class="active">
          <div class="step-icon">
            <i class="fas fa-building"></i>
          </div>
          <span>Empresa</span>
        </li>
        <li id="step2Label">
          <div class="step-icon">
            <i class="fas fa-user"></i>
          </div>
          <span>Cliente</span>
        </li>
        <li id="step3Label">
          <div class="step-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <span>Confirmar</span>
        </li>
      </ul>
    </div>

    <div id="alert" class="alert" role="alert" aria-live="polite"></div>

    <div id="step1" class="step active">
      <div class="card">
        <div class="card-header">
          <h2><i class="fas fa-building"></i> Informaci贸n de la Empresa</h2>
          <p class="card-description">Configura los detalles de la factura</p>
        </div>
        <div class="grid">
          <div class="form-group">
            <label for="montoBase">Monto Base (CUP)</label>
            <input type="number" id="montoBase" value="2000" step="0.01" min="1" required/>
            <p class="field-hint">Ingrese el monto base de la factura</p>
          </div>
          <div class="form-group">
            <label for="aplicarDescuento">Aplicar Descuento 10%</label>
            <select id="aplicarDescuento">
              <option value="no">No</option>
              <option value="si">S铆</option>
            </select>
          </div>
          <div class="form-group">
            <label for="montoFinal">Monto Final (CUP)</label>
            <input type="text" id="montoFinal" readonly class="result-field"/>
          </div>
          <div class="form-group">
            <label for="mesesExpiracion">Tiempo de Expiraci贸n (meses)</label>
            <input type="number" id="mesesExpiracion" value="3" min="1" max="36" required/>
            <p class="field-hint">Entre 1 y 36 meses</p>
          </div>
          <div class="form-group">
            <label for="numFactura">N煤mero de Factura</label>
            <input type="text" id="numFactura" readonly placeholder="Auto-generado" class="result-field"/>
          </div>
        </div>
      </div>
      <div class="btn-group">
        <button onclick="KoowexaFactura.siguiente()" class="btn btn-primary">
          <i class="fas fa-arrow-right"></i> Siguiente
        </button>
      </div>
    </div>

    <div id="step2" class="step">
      <div class="card">
        <div class="card-header">
          <h2><i class="fas fa-user"></i> Datos del Cliente</h2>
          <p class="card-description">Informaci贸n del destinatario</p>
        </div>
        <div class="grid">
          <div class="form-group">
            <label for="clienteGmail">Correo Electr贸nico *</label>
            <div class="input-with-suggestions">
              <input type="email" id="clienteGmail" placeholder="ejemplo@gmail.com" required autocomplete="email"/>
              <div id="sugerenciasCorreo" class="suggestions" style="display: none;"></div>
            </div>
            <p class="field-hint">El cliente recibir谩 la factura en este correo</p>
          </div>
          <div class="form-group">
            <label for="clienteFecha">Fecha de Emisi贸n</label>
            <input type="text" id="clienteFecha" readonly class="result-field"/>
          </div>
          <div class="form-group">
            <label for="clienteVencimiento">Fecha de Vencimiento</label>
            <input type="text" id="clienteVencimiento" readonly class="result-field"/>
          </div>
        </div>
      </div>
      <div class="btn-group">
        <button onclick="KoowexaFactura.anterior()" class="btn btn-secondary">
          <i class="fas fa-arrow-left"></i> Anterior
        </button>
        <button onclick="KoowexaFactura.siguiente()" class="btn btn-primary">
          Siguiente <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>

    <div id="step3" class="step">
      <div class="card">
        <div class="card-header">
          <h2><i class="fas fa-check-circle"></i> Revisa y Env铆a</h2>
          <p class="card-description">Confirma los datos antes de enviar la factura electr贸nica</p>
        </div>
        <div class="summary-container">
          <table class="resumen-table" id="resumenFactura"></table>
        </div>
      </div>
      <div class="btn-group">
        <button onclick="KoowexaFactura.anterior()" class="btn btn-secondary">
          <i class="fas fa-arrow-left"></i> Anterior
        </button>
        <button onclick="KoowexaFactura.enviarFacturaCompleta()" class="btn btn-primary btn-large">
          <i class="fas fa-paper-plane"></i> Enviar Factura
        </button>
      </div>
    </div>

    <div class="card facturas-section">
      <div class="card-header">
        <h2><i class="fas fa-history"></i> Historial de Facturas</h2>
        <p class="card-description">Facturas enviadas recientemente</p>
      </div>
      <div id="facturasEnviadas"></div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>